:root {
    --brand: #16a34a;        /* 主绿 */
    --brand-600: #16a34a;
    --brand-700: #15803d;
    --brand-800: #166534;
    --brand-50: #ecfdf5;
    --text: #111827;
    --muted: #6b7280;
    --border: #e5e7eb;
    --bg: #f9fafb;
    --panel: #ffffff;
    --danger: #ef4444;
}

* { box-sizing: border-box; }
html, body, #app { height: 100%; margin: 0; background: var(--bg); color: var(--text); font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "Helvetica Neue", Arial, "Noto Sans CJK SC", sans-serif; }

.app-topbar {
    height: 56px; background: var(--panel); border-bottom: 1px solid var(--border);
    display: flex; align-items: center; justify-content: space-between; padding: 0 16px; position: sticky; top: 0; z-index: 10;
}
.brand { display: flex; align-items: center; gap: 10px; }
.brand-logo { width: 24px; height: 24px; }
.brand-name { font-weight: 600; }

.user-chip { color: var(--muted); margin-right: 8px; }
.btn { border: 1px solid var(--border); padding: 6px 12px; border-radius: 8px; background: var(--panel); cursor: pointer; }
.btn:hover { border-color: var(--brand-600); color: var(--brand-700); }
.btn-ghost { background: transparent; border-color: transparent; }
.btn-primary { background: var(--brand-600); color: #fff; border-color: var(--brand-600); }
.btn-primary:hover { background: var(--brand-700); border-color: var(--brand-700); }

/* 页面布局：左侧会话 + 右侧聊天 */
.page-chat {
    display: grid; grid-template-columns: 280px 1fr; height: calc(100vh - 56px);
}
.sidebar {
    border-right: 1px solid var(--border); background: var(--panel); display: flex; flex-direction: column;
}
.sidebar-head {
    padding: 12px; display: flex; gap: 8px; border-bottom: 1px solid var(--border);
}
.sidebar-list {
    overflow-y: auto; padding: 8px;
}
.session-item {
    display: grid; grid-template-columns: 1fr auto; align-items: center; gap: 8px;
    padding: 8px 10px; border-radius: 8px; cursor: pointer;
}
.session-item .title { font-size: 12.5px; line-height: 1.3; color: var(--text); }
.session-item:hover { background: var(--brand-50); }
.session-item.active { background: #d1fae5; outline: 1px solid #a7f3d0; }

.session-actions .del {
    color: var(--muted); border: none; background: transparent; cursor: pointer;
}
.session-actions .del:hover { color: var(--danger); }

/* 聊天区 */
.chat {
    display: grid; grid-template-rows: auto 1fr auto; height: 100%;
}
.chat-toolbar {
    background: var(--panel); border-bottom: 1px solid var(--border);
    padding: 10px 12px; display: flex; align-items: center; gap: 10px; flex-wrap: wrap;
}

/* 开关与选择统一绿色 */
.select, .toggle {
    border: 1px solid var(--border); background: #fff; border-radius: 8px; height: 36px; padding: 0 10px; display: inline-flex; align-items: center; gap: 8px;
}
.select:focus, .toggle:focus { outline: 2px solid #86efac; border-color: var(--brand-600); }
.toggle { cursor: pointer; user-select: none; }
.toggle .dot {
    width: 16px; height: 16px; border-radius: 999px; background: #9ca3af;
}
.toggle.is-active { border-color: var(--brand-600); background: #ecfdf5; color: var(--brand-700); }
.toggle.is-active .dot { background: var(--brand-700); }

.chat-scroll {
    padding: 16px; overflow-y: auto; background: var(--bg);
}

.msg {
    display: grid; grid-template-columns: 40px 1fr; gap: 8px; margin-bottom: 12px;
}
.msg.me { grid-template-columns: 1fr 40px; }
.msg .avatar {
    width: 40px; height: 40px; border-radius: 999px; overflow: hidden; background: #eee;
}
.msg .avatar img { width: 100%; height: 100%; object-fit: cover; }
.msg .bubble {
    align-self: start;
    max-width: min(85%, 860px);
    border-radius: 14px; padding: 9px 12px;
    border: 1px solid var(--border);
    background: #fff;
    min-height: 40px; /* 与头像同高（默认一行时） */
    display: flex; align-items: center; /* 一行时垂直居中 */
}
.msg.me .bubble {
    background: #dcfce7; border-color: #bbf7d0;
}
.msg .content { width: 100%; overflow-wrap: anywhere; }

/* Composer：输入框内部的发送按钮 */
.composer {
    background: var(--panel); border-top: 1px solid var(--border); padding: 10px 12px;
}
.composer-wrap {
    position: relative; border: 1px solid var(--border); border-radius: 12px; background: #fff;
}
.composer-wrap:focus-within { outline: 2px solid #86efac; border-color: var(--brand-600); }
.composer textarea {
    width: 100%; min-height: 40px; max-height: 240px; padding: 10px 52px 10px 12px; border: none; resize: vertical; outline: none; font-size: 14px; line-height: 1.5;
}
.composer .send-btn {
    position: absolute; right: 6px; bottom: 6px; height: 32px; padding: 0 10px; border-radius: 8px;
    background: var(--brand-600); color: #fff; border: 1px solid var(--brand-600); cursor: pointer;
}
.composer .send-btn:hover { background: var(--brand-700); border-color: var(--brand-700); }
.composer .stop-btn {
    position: absolute; right: 6px; top: 6px; height: 28px; padding: 0 8px; border-radius: 8px; background: #fef3c7; border: 1px solid #f59e0b; color: #92400e; cursor: pointer;
}

/* Markdown（极简） */
.msg .content h1,h2,h3 { margin: 10px 0 6px; }
.msg .content p { margin: 6px 0; }
.msg .content code { background: #f3f4f6; padding: 1px 4px; border-radius: 4px; }
.msg .content pre { background: #111827; color: #f9fafb; padding: 10px; border-radius: 8px; overflow-x: auto; }

/* 登录页 */
.login-page { height: calc(100vh - 56px); display: grid; place-items: center; }
.login-card { width: 360px; padding: 20px; border: 1px solid var(--border); border-radius: 12px; background: var(--panel); }
.login-card h2 { margin: 0 0 8px; }
.login-card .row { display: grid; gap: 6px; margin: 10px 0; }
.login-card input { height: 36px; border: 1px solid var(--border); border-radius: 8px; padding: 0 10px; }
.login-card input:focus { outline: 2px solid #86efac; border-color: var(--brand-600); }
